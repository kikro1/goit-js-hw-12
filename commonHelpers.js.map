{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { curPage } from '../main.js';\n\nexport async function getPhotoByKeyword(query) {\n  const API_KEY = '42127236-8bfdbbfbeed8a2dadaca720e8';\n  const PARAMS = '/api/';\n  axios.defaults.baseURL = 'https://pixabay.com';\n\n  const response = await axios.get(PARAMS, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horisontal',\n      safesearch: true,\n      per_page: 15,\n      page: curPage,\n    },\n  });\n  return response.data;\n}","export function loadGallery(data) {\n    const markup = data.hits.map(data => {\n      return `<li class=\"gallery-item\">\n          <a href=\"${data.largeImageURL}\"><img src=\"${data.webformatURL}\" alt=\"${data.tags}\" class=\"gallery-image\" /></a>\n          <div class=\"gallery-wrap\">\n          <p><b>Likes</b><br />${data.likes}</p>\n          <p><b>Views</b><br />${data.views}</p>\n          <p><b>Comments</b><br />${data.comments}</p>\n          <p><b>Downloads</b><br />${data.downloads}</p>\n          </div>\n        </li>`;\n    });\n    return markup.join('');\n  }","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getPhotoByKeyword } from './js/pixabay-api.js';\nimport { loadGallery } from './js/render-functions.js';\n\nexport let curPage;\n\nconst refs = {\n  formRef: document.querySelector('.form'),\n  formInputRef: document.querySelector('.form-input'),\n  galleryRef: document.querySelector('.gallery'),\n  loaderRef: document.querySelector('.loader'),\n  loadMoreBtnRef: document.querySelector('.load-more-btn'),\n};\n\nconst lightboxOptions = {\n  captionDelay: 250,\n  captionsData: 'alt',\n};\n\nlet userValue;\nconst lightbox = new SimpleLightbox('.gallery a', lightboxOptions);\n\nrefs.formRef.addEventListener('submit', e => {\n  curPage = 1;\n  e.preventDefault();\n  refs.galleryRef.innerHTML = '';\n  refs.loaderRef.classList.remove('hide');\n  refs.loadMoreBtnRef.classList.add('hide');\n\n  userValue = refs.formInputRef.value;\n\n  if (userValue.trim() === '') {\n    refs.formRef.reset();\n    refs.loaderRef.classList.add('hide');\n  } else {\n    getPhotoByKeyword(userValue)\n      .then(data => {\n        refs.formRef.reset();\n        if (data.totalHits > 15) {\n          refs.loadMoreBtnRef.classList.remove('hide');\n          \n        }\n        if (data.hits.length === 0) {\n          iziToast.error({\n            message:\n              'Sorry, there are no images matching your search query. Please, try again!',\n            messageColor: 'white',\n            backgroundColor: 'red',\n            position: 'topRight',\n            maxWidth: 432,\n          });\n        }\n\n        refs.galleryRef.innerHTML = loadGallery(data);\n\n        lightbox.on('show.simplelightbox');\n        lightbox.refresh();\n      })\n      .catch(err =>\n        iziToast.error({\n          message: err.message,\n          position: 'topRight',\n          maxWidth: 432,\n        })\n      )\n      .finally(() => {\n        refs.loaderRef.classList.add('hide');\n      });\n  }\n});\n\nrefs.loadMoreBtnRef.addEventListener('click', () => {\n  refs.loaderRef.classList.remove('hide');\n  refs.loadMoreBtnRef.classList.add('hide');\n  curPage++;\n\n  getPhotoByKeyword(userValue)\n    .then(data => {\n      if (data.totalHits >= curPage * 15) {\n        refs.loadMoreBtnRef.classList.remove('hide');\n        refs.galleryRef.insertAdjacentHTML('beforeend', loadGallery(data));\n      } else {\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      }\n      lightbox.refresh();\n\n      const rect = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect();\n      window.scrollBy({\n        top: rect.height * 2,\n        behavior: 'smooth',\n      });\n    })\n    .catch(err =>\n      iziToast.error({\n        message: err.message,\n        position: 'topRight',\n        maxWidth: 432,\n      })\n    )\n    .finally(() => {\n      refs.loaderRef.classList.add('hide');\n    });\n});\n\n"],"names":["getPhotoByKeyword","query","API_KEY","PARAMS","axios","curPage","loadGallery","data","refs","lightboxOptions","userValue","lightbox","SimpleLightbox","e","iziToast","err","rect"],"mappings":"owBAGO,eAAeA,EAAkBC,EAAO,CAC7C,MAAMC,EAAU,qCACVC,EAAS,QACf,OAAAC,EAAM,SAAS,QAAU,uBAER,MAAMA,EAAM,IAAID,EAAQ,CACvC,OAAQ,CACN,IAAKD,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMI,CACP,CACL,CAAG,GACe,IAClB,CCpBO,SAASC,EAAYC,EAAM,CAY9B,OAXeA,EAAK,KAAK,IAAIA,GACpB;AAAA,qBACQA,EAAK,aAAa,eAAeA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA,iCAEzDA,EAAK,KAAK;AAAA,iCACVA,EAAK,KAAK;AAAA,oCACPA,EAAK,QAAQ;AAAA,qCACZA,EAAK,SAAS;AAAA;AAAA,cAG9C,EACa,KAAK,EAAE,CACzB,CCJO,IAAIF,EAEX,MAAMG,EAAO,CACX,QAAS,SAAS,cAAc,OAAO,EACvC,aAAc,SAAS,cAAc,aAAa,EAClD,WAAY,SAAS,cAAc,UAAU,EAC7C,UAAW,SAAS,cAAc,SAAS,EAC3C,eAAgB,SAAS,cAAc,gBAAgB,CACzD,EAEMC,EAAkB,CACtB,aAAc,IACd,aAAc,KAChB,EAEA,IAAIC,EACJ,MAAMC,EAAW,IAAIC,EAAe,aAAcH,CAAe,EAEjED,EAAK,QAAQ,iBAAiB,SAAUK,GAAK,CAC3CR,EAAU,EACVQ,EAAE,eAAc,EAChBL,EAAK,WAAW,UAAY,GAC5BA,EAAK,UAAU,UAAU,OAAO,MAAM,EACtCA,EAAK,eAAe,UAAU,IAAI,MAAM,EAExCE,EAAYF,EAAK,aAAa,MAE1BE,EAAU,KAAM,IAAK,IACvBF,EAAK,QAAQ,QACbA,EAAK,UAAU,UAAU,IAAI,MAAM,GAEnCR,EAAkBU,CAAS,EACxB,KAAKH,GAAQ,CACZC,EAAK,QAAQ,QACTD,EAAK,UAAY,IACnBC,EAAK,eAAe,UAAU,OAAO,MAAM,EAGzCD,EAAK,KAAK,SAAW,GACvBO,EAAS,MAAM,CACb,QACE,4EACF,aAAc,QACd,gBAAiB,MACjB,SAAU,WACV,SAAU,GACtB,CAAW,EAGHN,EAAK,WAAW,UAAYF,EAAYC,CAAI,EAE5CI,EAAS,GAAG,qBAAqB,EACjCA,EAAS,QAAO,CACxB,CAAO,EACA,MAAMI,GACLD,EAAS,MAAM,CACb,QAASC,EAAI,QACb,SAAU,WACV,SAAU,GACpB,CAAS,CACF,EACA,QAAQ,IAAM,CACbP,EAAK,UAAU,UAAU,IAAI,MAAM,CAC3C,CAAO,CAEP,CAAC,EAEDA,EAAK,eAAe,iBAAiB,QAAS,IAAM,CAClDA,EAAK,UAAU,UAAU,OAAO,MAAM,EACtCA,EAAK,eAAe,UAAU,IAAI,MAAM,EACxCH,IAEAL,EAAkBU,CAAS,EACxB,KAAKH,GAAQ,CACRA,EAAK,WAAaF,EAAU,IAC9BG,EAAK,eAAe,UAAU,OAAO,MAAM,EAC3CA,EAAK,WAAW,mBAAmB,YAAaF,EAAYC,CAAI,CAAC,GAEjEO,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UACpB,CAAS,EAEHH,EAAS,QAAO,EAEhB,MAAMK,EAAO,SACV,cAAc,eAAe,EAC7B,wBACH,OAAO,SAAS,CACd,IAAKA,EAAK,OAAS,EACnB,SAAU,QAClB,CAAO,CACP,CAAK,EACA,MAAMD,GACLD,EAAS,MAAM,CACb,QAASC,EAAI,QACb,SAAU,WACV,SAAU,GAClB,CAAO,CACF,EACA,QAAQ,IAAM,CACbP,EAAK,UAAU,UAAU,IAAI,MAAM,CACzC,CAAK,CACL,CAAC"}